\documentclass{jlreq}
\usepackage{hmtrump}
\usepackage{shortvrb,bxtexlogo}
\usepackage[hidelinks,unicode=true]{hyperref}
\usepackage{tgheros,newpxtext,newpxmath,beramono}
\MakeShortVerb{\|}
\usepackage[jfm_yoko=jlreq,jfm_tate=jlreqv,hiragino-pron]{luatexja-preset}
\renewcommand{\thefootnote}{\textasteriskcentered\arabic{footnote}}
\title{|hmtrump| Package}
\author{ひとみさん}
\date{v1.0 [2019/04/14]}
\begin{document}
\maketitle

\section{これは何}
\TeX 文書中で、トランプのカードを表現するためのパッケージです。
|hmtrump| パッケージを利用することで、次のような出力を得る
ことができます。内部で |fontspec| パッケージを読み込んでいるので、
\LuaLaTeX 専用のパッケージとなります（\XeLaTeX でも動くかも
しれないけど、動作確認してないので非対応です）。日本語文書中
でも使用できます。

\vspace*{5pt}
\rule{0pt}{0pt}\hfil
\begin{minipage}[t]{.45\textwidth}
\centerline{output}\hrule\vspace*{1pt}\hrule
\footnotesize
When you play skat, you might remember all \trumpx J
cards---\trump JC, \trump JS, \trump JH and \trump JD
belong trump suit. If trump suit is \hmD{} and
\trump TD is led, then you can follow with \trump JC.

The rank of \trumpx{J} is below:
\[\trump JC>\trump JS>\trump JH>\trump JD\]

All joker---\joker, \blackjoker, \redjoker{} will not
be used in skat.

\hspace{1ex}\hrule\hspace{1ex}

タロットカードには、切札専用のカード\tarottrump{1}〜
\tarottrump{21}が含まれています。占い用のタロットカード
には\trumpblank{愚者}のカードが含まれていますが、
これは切札ではありません。
\end{minipage}
\hfil
\begin{minipage}[t]{.45\textwidth}
\centerline{imput}\hrule\vspace*{1pt}\hrule
\scriptsize\ttfamily
When you play skat, you might remember all |\trumpx| J 
cards---|\trump| JC, |\trump| JS, |\trump| JH and |\trump| JD
belong trump suit. If trump suit is |\hmD{}| and |\trump| TD
is led, then you can follow with |\trump| JC.\\

The rank of trumps are below:\\
|\[|
|\trump| JC > |\trump| JS > |\trump| JH > |\trump| JD 
|\]|\\
All joker---|\joker|, |\blackjoker|, |\redjoker{}| will not
be used in skat.\\

|\hspace{1ex}\hrule\hspace{1ex}|\\

タロットカードには、切札専用のカード |\tarottrump{1}|〜
|\tarottrump{21}| が含まれています。占い用のタロットカードには
|\trumpblank{愚者}| のカードが含まれていますが、これは切札では
ありません。
\end{minipage}
\hfil\rule{0pt}{0pt}
\vspace*{5pt}

\section{使い方}
このパッケージで用いているトランプのインデックス用のフォントは、
同梱のトランプの隅印的書体『NKD04 Playing Card's Index』Version 0.80
\footnote{\url{http://hwm3.gyao.ne.jp/shiroi-niwatori/nishiki-teki.htm}}
を用いています。|hmtrump| パッケージを利用する前に、このフォントを
\LuaTeX から利用可能な場所に保存してください。通常はこのフォントを
インストールすればよいです。フォントの作成者はうみほたる様です。
パッケージ作成者ではありません。

パッケージを読み込むには|\usepackage{hmtrump}|をプリアンブルに
書いてください。オプションはありません。

\section{依存パッケージ}
|hmtrump| パッケージは内部で |tikz|、|xcolor|、|fontspec| パッケージ
を読み込みます。

\section{提供される命令}
\begin{table}[tb]
\centering
\caption{例\label{ie}}
\begin{tabular}{lc}
\hline
\multicolumn{1}{c}{入力/input}&出力/output\\
\hline\hline
|\trump{A}{S} \trump{J}{C}|&\trump {A}{S} \trump{J}{C}\\
|\trump 7D \trump QH|&\trump 7D \trump QH\\
|\trump 3x \trump Tx|&\trump 3x \trump Tx\\
|\trumpx 6 \trumpx Q|&\trumpx 6 \trumpx Q\\
\hline
|\hmS \hmH \hmD \hmC|&\hmS \hmH \hmD \hmC\\
\hline
|\JOKER \joker|&\JOKER \joker\\
|\BLACKJOKER \blackjoker|&\BLACKJOKER \blackjoker\\
|\WHITEJOKER \whitejoker|&\WHITEJOKER \whitejoker\\
|\REDJOKER \redjoker|&\REDJOKER \redjoker\\
\hline
|\trumpblank{愚者}|&\trumpblank{愚者}\\
|\trumpblank{\hmtcfont PAGE}|&\trumpblank{\hmtcfont PAGE}\\
\hline
|\tarottrump{0}|&\tarottrump{0}\\
|\tarottrump{14}|&\tarottrump{14}\\
|\tarottrump{21}|&\tarottrump{21}\\
\hline
\end{tabular}
\end{table}

\subsection{\textbackslash trump 命令}
|\trump{<ランク>}{<スート>}| の書式で、トランプのカードを出力します。
|<ランク>| には通常 |A|、|1| から |9| の整数、|T|、|J|、|C|、|Q|、|K| の
いずれかが入力されることを想定しています。|T| とすると
{\fontspec{NKD04_Playing_Cards_Index}{\char"E002}}が出力
されます。|<スート>| には |S|（\hmS）、|H|（\hmH）、|D|（\hmD）、
|C|（\hmC）|x|（スートの指定なし）のいずれかを指定します。

|\trump{<ランク>}{x}|は|\trumpx{<ランク>}|と書くこともできます。

\subsection{スート出力命令}
|\hmS|、|\hmH|、|\hmD|、|\hmC| はそれぞれ \hmS、\hmH、
\hmD、\hmC を出力します。

\subsection{ジョーカー出力命令}
|\JOKER| や |\joker| で\JOKER や\joker を出力します。
ジョーカー出力命令は8種類あります。表\ref{ie}を参照してください。
デフォルトでは、|\JOKER| は |\BLACKJOKER|になり、
|\joker| は |\blackjoker| となっています。必要に
応じて、|\renewcommand{\joker}{\whitejoker}| などとすることが
できます。

\subsection{汎用カード命令}
|\trumpblank{<内容>}| で一般のカードを出力します。カードの中身
は本文書体で表示されるので、必要があれば適当に |\textsf| や |\textbf|
などを補ってください。|\hmtcfont| 命令
で NKD04 Playing Card's Index を利用できます（|\hmtcfont|
は宣言型の命令です）。例えば、|\trumpblank{\hmtcfont JOKER}|
で\trumpblank{\hmtcfont JOKER}を出力します。

\subsection{タロットカードの切札用命令}
|\tarottrump{<数字>}| で、タロットの切札を出力できます。|<数字>| には
0から21の整数が入ります。例えば、|\tarottrump{8}| で\tarottrump{8}が
出力されます。|\tarottrump{0}| は愚者のカードを出力する目的で用い、
\tarottrump{0}が出力されます。

\section{カスタマイズ}
|\renewcommand| などをすることによって、出力結果をカスタマイズ
することができます。

\subsection{フォント名}
NKD04\_Playing\_Cards\_Index を違うフォント名でインストールした場合、
|\hmtc@trump@font| をインストールしたフォント名に |\renewcommand| で
定義し直してください。

注意: NKD04 Playing Card's Index Version 0.80 の私用領域を
前提としているので、他のフォントを指定した場合はうまく動きません。

\subsection{色}
\begin{table}[tb]
\centering
\caption{変更可能な色\label{color}}
\begin{tabular}{lll}
\hline
色の名前&デフォルトの定義&色の箇所\\
\hline\hline
|hartsuit|&|{cmyk}{.14,.94,.22,.27}|&ハートのスート及びカードの文字\\
|diasuit|&|{cmyk}{.11,.57,.97,.31}|&ダイヤのスート及びカードの文字\\
|clubsuit|&|{cmyk}{.70,.5,.99,.18}|&クラブのスート及びカードの文字\\
|spadesuit|&|{cmyk}{.98,.80,.5,.15}|&スペードのスート及びカードの文字\\
\hline
|cardback|&|{gray}{.95}|&カードの背景\\
|cardborder|&|{gray}{.2}|&カードの枠線\\
|cardtext|&|{gray}{0}|&スート指定のないカードの文字\\
\hline
\end{tabular}
\end{table}

視認しやすいよう、|hmtrump| パッケージではスートのマークと、
スートのマークを伴うカードを出力する時に、色を使って出力します。
デフォルトでは、白黒印刷にも耐えれるよう、それぞれ彩度を落とした
色になっています。

色を変更したい場合は、|xcolor| パッケージが提供している、 |\definecolor|
命令を使って、色の定義を変更します。変更できる色の定義は、表\ref{color}に
示してあるとおりです。

例えば、|\definecolor{hartsuit}{cmyk}{0,.84,.94,.01}| と書いておけば、
|\hmH| で{\definecolor{hartsuit}{cmyk}{0,.84,.94,.01}\hmH}が出力されます。
|\definecolor| 命令は、局所化の影響を受けるので、|{}| で括れば
一部だけの色を変えることも可能です。

\subsection{サイズ}
|\tizset|命令を使って、出力されるカードのサイズを変更することができます。

|\tikzset{hmtcscale/.style={scale=<倍率>}}| と書くことで指定した倍率の
カードが出力されます。デフォルトでは 0.9 倍になっています。こちらも局所化の影響を
うけます。ベースラインの位置は固定です。

例えば |{\tikzset{hmtcscale/.style={scale=0.6}}\trump 3H}\trump JD| と
書くと {\tikzset{hmtcscale/.style={scale=0.6}}\trump 3H}\trump JD が出力されます。

\section{その他}
\begin{itemize}
\item \LuaLaTeX-ja を利用している場合、|\ltjdefcharrange| 命令を用いて、24番の
	文字範囲にいくつかの文字を追加し、それらを\textbf{ALchar}として設定します。
	文字範囲を変更している場合、24番の文字範囲には新しく文字を追加したり、\textbf{JAchar}
	として設定しないように注意してください。
\end{itemize}
	

\section{TO DO}
以下実装したいと思っていること:
\begin{itemize}
\item Unicode のトランプの領域の文字（{\fontspec{NKD04_Playing_Cards_Index}\char"1F0D1}など）
	を利用するための機構の実装。
\item |\trump| 命令に不正なスートの指定子が指定された時にエラーを吐くようにする。
\item もしかしなくても |\joker| 命令で出力されるカード、若干位置が下がってますね……。
\item {[2019-04-14 ver.~1.0]} |fontspec| パッケージに対する理解が甘くて、フォントを選択するやり方が若干マズい
	気がするので、修正したい。
\end{itemize}


\section{Change log}
\begin{description}
\item[{[2019-04-14 ver.~1.0]}] |hmtrump.sty| に作者を明記。
\item[{[2019-04-14 ver.~1.0]}] ドキュメントのサンセリフフォントを変更。
\item[{[2019-04-14 ver.~1.0]}] TO DO を追加。
\end{description}

\end{document}